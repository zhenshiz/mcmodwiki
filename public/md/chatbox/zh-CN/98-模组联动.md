<h2 id="模组联动" data-toc-id="模组联动">模组联动</h2>
<div type="important" data-type="admonition" data-admo-type="important">
  <div data-type="admonition-title">IMPORTANT</div>
  <div data-type="admonition-content">
    <p>并非所有版本的ChatBox都有本文提及的模组联动，请以实际表现为准。比如KubeJS联动只适用于1.20.1 forge 和1.21.1
      neoforge。</p>
  </div>
</div>
<h3 id="k" data-toc-id="k">KubeJS</h3>
<p>本模组给KubeJS提供了一个全局变量<code>ChatBoxUtil</code>，这个方法中包含api化的对话框指令。<s>no
    command行动</s></p>
<p>本模组还提供了3个事件给KubeJS调用来添加自己想加的东西，例子如下：</p><pre language="javascript" isclosed="false"><code class="language-javascript">//client_script

//在对话框渲染前触发，提供了GuiGraphics可以添加自己想要的渲染，可取消事件
ChatBoxEvents.renderPre(event=&gt;{
  let guiGraphics = event.getGuiGraphics()
  event.cancel()
})

//在对话框渲染后触发，提供了GuiGraphics可以添加自己想要的渲染
ChatBoxEvents.renderPost(event=&gt;{
  let guiGraphics = event.getGuiGraphics()
})

//server_script or client_script
//在跳转对话或关闭对话（index为-1）时触发，提供了对话的数据包文件，分组和序号来方便用户对特别某一句对话添加自己想要的功能。
//配合ChatBoxUtil的方法可以动态修改对话
ChatBoxEvents.skipChat(event =&gt; {
  let { player, resourceLocation, group, index, targets } = event
  if (index === -1) player.tell('关闭了对话框')
})</code></pre>
<h3 id="泰拉生物" data-toc-id="泰拉生物">泰拉生物</h3>
<p>兼容版本为：<code>1.1.17-hotfix</code></p>
<div type="important" data-type="admonition" data-admo-type="important">
  <div data-type="admonition-title">IMPORTANT</div>
  <div data-type="admonition-content">
    <p>写该功能的时候发现GitHub和发布的版本的代码差距还是比较大的，所以不一定保证后续的版本的兼容性，但是我也会尽可能去兼容更新的版本的。</p>
  </div>
</div>
<p>
  通过修改配置文件可以阻止泰拉生物的NPC对话系统，需要注意的是如果开启这个配置所有的NPC交互都会直接打开对应的商店，你需要自己手动给这些NPC配置对应的对话框。
</p>
<p>那如何配置对话框呢？你可以通过KubeJS的实体交互事件取消原来的交互行为，从而跳转本模组的对话，例子如下：</p><pre language="javascript" isclosed="false"><code class="language-javascript">//server_script
ItemEvents.entityInteracted(event =&gt; {
  let { player, target } = event
  //判断NPC的实体类型，比如这里是判断是否为商人
  if (target.type === 'terra_entity:merchant') {
    //跳转本模组的对话框
    ChatBoxUtil.serverSkipDialogues(player, 'test:test', 'test', [target])
    //取消原先的交互行为
    event.cancel()
  }
})</code></pre>
<p>这样就成功的将泰拉生物NPC的对话框换成本模组的，那么这时候又有人要问了：那我还如何打开这个NPC的商店呢？</p>
<p>
  你可以在对话文件中给选项的点击事件类型选择为<code>TERRA_ENTITY_SHOP</code>，这样玩家点击该选项的时候就可以打开当前交互的NPC对应的商店。
</p>
<h3 id="textanimator" data-toc-id="textanimator">TextAnimator</h3>
<p>你可以用这个模组来给自己的对话文本提供更好看的动画，使用方法可以直接参考该模组modrinth主页：<a target="_blank"
    rel="noopener noreferrer nofollow"
    href="https://modrinth.com/mod/text-animator">TextAnimator</a></p>
<p></p>