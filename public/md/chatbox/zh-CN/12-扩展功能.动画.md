<h2 id="a" data-toc-id="a">Animation 动画</h2>
<p>动画是立绘的配置项之一，用于丰富立绘的表现力。本模组的动画采用关键帧动画的配置方式。先看一下一个关键帧的所有参数：</p>
<ul>
  <li>
    <p>
      <code>time</code>（默认值为1）：这个关键帧从开始到执行结束的总帧数，实际动画表现受对话文件中<code>animationFPS</code>配置和用户设备的影响。默认动画帧率是60/秒，即<code>time</code>为60时，动画应该会持续1秒（如果用户设备的帧率小于60，动画持续时间会延长）。
    </p>
  </li>
  <li>
    <p><code>easing</code>：该关键帧的缓动函数。关于缓动函数的介绍，你可以看<a target="_blank"
        rel="noopener noreferrer nofollow"
        href="https://easings.net/zh-cn">缓动函数速查表</a>。可选的参数有：<code>EASE_IN_SINE, EASE_OUT_SINE, EASE_IN_OUT_SINE, EASE_IN_QUAD, EASE_OUT_QUAD, EASE_IN_OUT_QUAD, EASE_IN_CUBIC, EASE_OUT_CUBIC, EASE_IN_OUT_CUBIC, EASE_IN_QUART, EASE_OUT_QUART, EASE_IN_OUT_QUART, EASE_IN_QUINT, EASE_OUT_QUINT, EASE_IN_OUT_QUINT, EASE_IN_EXPO, EASE_OUT_EXPO, EASE_IN_OUT_EXPO, EASE_IN_CIRC, EASE_OUT_CIRC, EASE_IN_OUT_CIRC, EASE_IN_BACK, EASE_OUT_BACK, EASE_IN_OUT_BACK, EASE_IN_ELASTIC, EASE_OUT_ELASTIC, EASE_IN_OUT_ELASTIC, EASE_IN_BOUNCE, EASE_OUT_BOUNCE, EASE_IN_OUT_BOUNCE</code>
    </p>
  </li>
  <li>
    <p>
      <code>x, y, scale, brightness, opacity, angle</code>：就是立绘的对应值。在该关键帧的持续时间内，这些值会依据缓动函数而逐渐改变，从而实现动画效果。
    </p>
  </li>
  <li>
    <p>
      <code>xOffset, yOffset</code>：相对于立绘原坐标的偏移量。如<code>xOffset</code>填5，立绘就会向右移动5单位；<code>yOffset</code>填-5，立绘就会向上移动5单位。
    </p>
  </li>
  <li>
    <p><code>texture</code>：同立绘的对应值，在该关键帧结束时才会改变。</p>
  </li>
  <li>
    <p><code>attachment</code>：同立绘的对应值，在该关键帧结束时才会改变。</p>
  </li>
</ul>
<p></p>
<p>看到这里有人可能会问了，一个关键帧有那么多参数，那动画写起来是不是很麻烦？其实并不是，看一下配置方法就明白了。</p>
<h3 id="配置方法1" data-toc-id="配置方法1">配置方法1：主题文件预设动画</h3>
<p>
  在主题文件的配置中，有<code>customAnimation</code>字段，这个字段下可以预设含名称的动画，然后只要在立绘的<code>animation</code>字段填写这个名称，就能直接使用对应的动画。本模组自带的三种动画就是用这种方式添加的。
</p>
<p>通过这种方式定义的动画一般是比较常用的，如果你要为某一个立绘添加量身定制的动画，推荐使用配置方法2（当然你就是想写在主题文件里，也没人拦你）。</p>
<div type="important" data-type="admonition" data-admo-type="important">
  <div data-type="admonition-title">IMPORTANT</div>
  <div data-type="admonition-content">
    <p>虽然预设动画是写在主题文件里面的，但是它并不与主题绑定，只要主题被加载了，这些动画就全局通用。</p>
    <p>
      <strong>动画名称区分大小写。</strong>由于预设动画全局通用，若有同名动画，后加载的会覆盖先加载的<span data-type="hidden-text">（你问我加载顺序是由什么决定的？我也不知道，你问代码吧）</span>，因此建议采用MC通用的命名方式——命名空间:名称——以防止重名。<span data-type="hidden-text">（没有人用还担心重名吗）</span>
    </p>
  </div>
</div>
<p>来看看内置的3种动画的写法吧：</p><pre language="json" isclosed="false"><code class="language-json">"customAnimation": {
    "FADE_IN": [
      {"time": 1, "opacity": 0},
      {"time": 30, "opacity": 100, "easing": "EASE_OUT_SINE"}
    ],
    "SLIDE_IN_FROM_BOTTOM": [
      {"time": 30, "yOffset": -5, "easing": "EASE_OUT_SINE"}
    ],
    "BOUNCE": [
      {"time": 15, "yOffset": -5, "easing": "EASE_OUT_SINE"},
      {"time": 15, "yOffset": 5, "easing": "EASE_OUT_SINE"}
    ]
  }</code></pre>
<p>
  可以看到，一个动画实际上就是一组关键帧。立绘渲染时，经过一个关键帧定义的<code>time</code>帧后，立绘的属性就会变成该关键帧中所定义的值。如果关键帧中没有某个字段，立绘对应字段的值就不会变化。所以虽然一个关键帧包含很多字段，但只有你需要用才写，用不到就不写。
</p>
<p><s><span data-type="hidden-text">为什么FADE_IN动画多了一帧？请不要在意这些小问题</span></s></p>
<h3 id="配置方法2" data-toc-id="配置方法2">配置方法2：主题文件预设立绘</h3>
<p>
  立绘的配置中有两个和动画有关的字段，一个是<code>animation</code>，填写通过配置方法1定义的动画名称；另一个是<code>customAnimation</code>，填写<strong>关键帧数组</strong>。
</p>
<div type="info" data-type="admonition" data-admo-type="info">
  <div data-type="admonition-title">INFO</div>
  <div data-type="admonition-content">
    <p>如果一个立绘同时填写了<code>animation</code> 和<code>customAnimation</code>
      字段，那么只有<code>customAnimation</code> 会生效。</p>
  </div>
</div>
<p>示例：</p><pre language="json" isclosed="false"><code class="language-json">    "ciallo": {
      "x": 11,
      "y": 41,
      "width": 22,
      "height": 13,
      "texture": "chatbox:textures/box1.png",
      "attachment": [
        {"type": "text", "value": "Ciallo～(∠·ω&lt; )⌒★", "x": 2, "y": 4.5}
      ],
      "customAnimation": [
        {"scale": 0},
        {"time": 14, "scale": 1.5}
      ],
      "注释：动画效果": "让该立绘由小变大出现"
    }</code></pre>
<div type="important" data-type="admonition" data-admo-type="important">
  <div data-type="admonition-title">IMPORTANT</div>
  <div data-type="admonition-content">
    <p>
      虽然立绘的<code>customAnimation</code>字段和主题文件的<code>customAnimation</code>同名，但是写法有区别。与立绘绑定的动画无需命名，所以只填写关键帧数组就行，主题文件中的预设动画才需要命名！
    </p>
  </div>
</div>
<h3 id="配置方法3" data-toc-id="配置方法3">配置方法3：对话文件替换立绘</h3>
<p>就是利用替换立绘功能给主题中预设的立绘更换别的动画，本质跟方法2是一样的，这里只是提一下。</p>
<p></p>